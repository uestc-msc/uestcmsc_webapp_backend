# 数据模型

本文档描述了软件中使用的数据模型。

* 超级管理员可通过 `/admin/` 入口读取除密码外的所有数据、修改所有数据，故略去超级管理员的读写权限；

## 用户模型 UserProfile

用户模型是对 `django.contrib.auth.models.User` 的扩展，扩展的模型为 `users.models.UserProfile`。

-----------------------

本软件使用了 `django.contrib.auth.models.User` 模型的如下属性（√ 允许，× 不允许，○ 见注释）：

字段名|中文|自己可读|自己可写|任何人可读|管理员可读|管理员可写
-|-|:-:|:-:|:-:|:-:|:-:|
username|用户名（邮箱）|√|×|×|√|√
first_name|姓名|√|√|√|√|√
last_name|头衔|√|×|√|√|√
password|密码|×|○|×|×|×
is_staff|是否为管理员|√|×|√|√|×
is_superuser|是否为超级管理员|√|×|√|√|×
last_login|上次登录日期时间|√|×|√|√|×
date_joined|注册日期时间|√|×|√|√|×

* 注意：**本软件的文档和代码中，`username` 和 `email` 为同一个概念**；
* 使用 `username` 而表示邮箱而不使用 `email` 字段的原因是 Django 认证系统要求 `username` 字段非空、非重复，而 `email` 则为可选字段，登录等函数都使用 `username`；
* 头衔是管理员授予的昵称，类似于 QQ 群头衔，如 `甜乐姐姐`；
* 密码在验证本人验证邮箱后方可修改；
* 用户可设置邮箱是否对其他人可见，设置字段在 `users.models.UserProfile.email_public`；

-----------------------

本软件为 `users.models.UserProfile` 模型设置了如下额外属性（√ 允许，× 不允许，○ 见注释）：

字段名|中文|自己可读|自己可写|任何人可读|管理员可读|管理员可写|
-|-|:-:|:-:|:-:|:-:|:-:|
student_id|学号|√|√|×|√|√
experience|经验|√|×|√|√|×

------------------------